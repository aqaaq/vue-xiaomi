(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-795be29e"],{"498a":function(e,t,r){"use strict";var n=r("23e7"),a=r("58a8").trim,i=r("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("5899"),i="["+a+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5a4b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"分类")]),r("el-form",{attrs:{"label-width":"150px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[e.parents?r("el-form-item",{attrs:{label:"上级分类"}},[r("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.model.parents,callback:function(t){e.$set(e.model,"parents",t)},expression:"model.parents"}},e._l(e.parents,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"新建分类"}},[r("el-input",{attrs:{width:"400"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"版本规格"}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.model.sizes.push(" ")}}},[e._v("添加(例如4G + 64G，默认)")]),r("br"),e._l(e.model.sizes,(function(t,n){return r("div",{key:n},[r("el-input",{staticStyle:{width:"400px","margin-right":"30px"},attrs:{type:"text",rows:4,placeholder:"请输入内容",required:""},model:{value:e.model.sizes[n],callback:function(t){e.$set(e.model.sizes,n,t)},expression:"model.sizes[key]"}}),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.model.sizes.splice(n,1)}}},[e._v("删除")])],1)}))],2),r("el-form-item",{attrs:{label:"排列顺序"}},[r("el-input",{attrs:{type:"text"},model:{value:e.model.index,callback:function(t){e.$set(e.model,"index",t)},expression:"model.index"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},a=[],i=(r("d81d"),r("b0c0"),r("498a"),r("96cf"),r("1da1")),s={props:{id:{type:String}},data:function(){return{model:{sizes:[]},parents:{}}},methods:{fetch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/categories/".concat(e.id));case 2:e.model=t.sent;case 3:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.model.name){t.next=2;break}return t.abrupt("return",e.$message("分类名称必填！"));case 2:if(r=!0,e.model.sizes.map((function(e){e.trim()||(r=!1)})),r){t.next=6;break}return t.abrupt("return",e.$message("规格不能填空值！"));case 6:if(!e.id){t.next=11;break}return t.next=9,e.$http.put("rest/categories/"+e.id,e.model);case 9:t.next=13;break;case 11:return t.next=13,e.$http.post("rest/categories",e.model);case 13:e.$message.success(e.id?"修改成功":"添加成功！"),e.$router.push("/categories/list");case 15:case"end":return t.stop()}}),t)})))()},fetchParents:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rest/categories");case 2:e.parents=t.sent,console.log(e.parents);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.id&&this.fetch(),this.fetchParents()}},o=s,c=r("2877"),u=Object(c["a"])(o,n,a,!1,null,"7f8c1756",null);t["default"]=u.exports},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},c8d2:function(e,t,r){var n=r("d039"),a=r("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||i[e]()!=i||a[e].name!==e}))}},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,i=r("1dde"),s=r("ae40"),o=i("map"),c=s("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-795be29e.3b07cad5.js.map